'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = initialOrdering;

var _graphlib = require('graphlib');

function initialOrdering(G) {
  var order = [];

  var start = G.nodes().filter(function (u) {
    return G.node(u).rank === 0;
  }).concat(G.sources());
  if (start.length === 0) {
    // start with first node even if it's not a source or rank 0
    start = G.nodes().slice(0, 1);
  }

  _graphlib.alg.preorder(G, start).forEach(function (u) {
    var rank = G.node(u).rank;
    while (rank >= order.length) {
      order.push([]);
    }order[rank].push(u);
  });

  return order;
}